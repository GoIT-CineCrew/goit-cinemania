(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const s of t.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function i(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function o(e){if(e.ep)return;e.ep=!0;const t=i(e);fetch(e.href,t)}})();const u={TMDB_API_KEY:"532c164e7aaa985e6a97f7fc762d2aea",TMDB_BASE_URL:"https://api.themoviedb.org/3",TMDB_IMAGE_BASE_URL:"https://image.tmdb.org/t/p"},y=u.TMDB_API_KEY,h=u.TMDB_BASE_URL;async function w(){var n;try{const r=await fetch(`${h}/trending/movie/week?api_key=${y}`);if(!r.ok)throw new Error(`API Hatası: ${r.status} ${r.statusText}`);const o=(await r.json()).results;if(!o||o.length===0)throw new Error("Film gelmedi");const e=o[Math.floor(Math.random()*o.length)],p=(n=(await(await fetch(`${h}/movie/${e.id}/videos?api_key=${y}`)).json()).results)==null?void 0:n.find(a=>a.type==="Trailer"&&a.site==="YouTube");document.getElementById("hero-default").style.display="none";const l=document.getElementById("hero-random-movie");l.style.display="flex",e.backdrop_path&&(l.style.backgroundImage=`ur[](https://image.tmdb.org/t/p/original${e.backdrop_path})`),l.querySelector(".hero-movie-title").textContent=e.title,l.querySelector(".hero-movie-details").textContent=e.overview||"Açıklama yok.";const g=document.getElementById("hero-movie-poster");g.src=e.poster_path?`https://image.tmdb.org/t/p/w500${e.poster_path}`:"https://via.placeholder.com/500x750?text=No+Image";const c=Math.round(e.vote_average||0),f="★".repeat(Math.floor(c/2))+(c%2?"½":"")+"☆".repeat(5-Math.ceil(c/2));l.querySelector(".hero-movie-stars").textContent=f;const d=document.getElementById("watch-trailer-btn");d&&p&&(d.onclick=()=>{const a=document.createElement("div");a.className="movie-popup-overlay",a.innerHTML=`
          <div class="popup-video-wrapper">
            <iframe src="https://www.youtube.com/embed/${p.key}?autoplay=1" 
                    allow="autoplay" allowfullscreen></iframe>
          </div>`,document.body.appendChild(a),a.onclick=()=>a.remove()}),document.getElementById("more-details-btn").onclick=()=>{typeof deleteHeroTrendsPopup=="function"&&deleteHeroTrendsPopup(e)}}catch(r){console.error("Hero yüklenemedi:",r),document.getElementById("hero-default").style.display="block",document.getElementById("hero-random-movie").style.display="none"}}document.addEventListener("DOMContentLoaded",w);let m={};const v=u.TMDB_API_KEY,_=u.TMDB_BASE_URL,B=u.TMDB_IMAGE_BASE_URL;async function M(){if(!(Object.keys(m).length>0))try{(await axios.get(`${_}/genre/movie/list?api_key=${v}&language=tr-TR`)).data.genres.forEach(r=>{m[r.id]=r.name}),console.log("Türler yüklendi:",m)}catch(n){console.error("Türler yüklenemedi",n)}}async function A(){try{return(await axios.get(`${_}/trending/movie/week?api_key=${v}&language=tr-TR`)).data.results}catch(n){return console.error("API hatası:",n),[]}}function k(n){const r=n/2,i=Math.floor(r),o=r-i>=.5?1:0,e=5-i-o;let t="";for(let s=0;s<i;s++)t+=`<li>
        <svg width="14" height="14">
            <use href="./img/sprite.svg#full-star"></use>
        </svg>
    </li>`;o&&(t+='<li><svg width="14" height="14"><use href="./img/sprite.svg#half-star"></use></svg></li>');for(let s=0;s<e;s++)t+='<li><svg width="14" height="14"><use href="./img/sprite.svg#empty-star"></use></svg></li>';return t}async function I(){console.log("Anasayfa yüklendi, API'den veri çekiliyor..."),await M();const n=await A();if(n.length===0)return;const r=n.slice(0,3),i=document.querySelectorAll(".home-movie-item");r.forEach((o,e)=>{const t=i[e];if(!t)return;const s=t.querySelector(".card-title");s&&(s.textContent=o.title||o.name);const p=o.release_date?o.release_date.split("-")[0]:"—",l=t.querySelector(".card-year");l&&(l.textContent=p);const g=o.poster_path?`${B}/w342${o.poster_path}`:"./img/no-poster.jpg",c=t.querySelector(".card-image");c&&(c.src=g,c.alt=`${o.title} poster`);const f=o.genre_ids.slice(0,2).map(E=>m[E]||"Bilinmiyor").join(", "),d=t.querySelector(".card-genre");d&&(d.textContent=f||"Tür yok");const a=t.querySelector(".card-rating");a&&(a.innerHTML=k(o.vote_average))}),console.log("3 kart başarıyla dolduruldu!")}document.addEventListener("DOMContentLoaded",I);
//# sourceMappingURL=main-D3S9xziz.js.map
