{"version":3,"file":"main-hhVqCOwf.js","sources":["../../src/config.js","../../src/js/modal.js","../../src/js/hero.js","../../src/main.js"],"sourcesContent":["const config = {\n  TMDB_API_KEY: '532c164e7aaa985e6a97f7fc762d2aea',\n  TMDB_BASE_URL: 'https://api.themoviedb.org/3',\n  TMDB_IMAGE_BASE_URL: 'https://image.tmdb.org/t/p',\n};\n\nexport default config;\n","import config from '../config.js';\n\nconsole.log('YENİ MODAL.JS YÜKLENDİ - ' + new Date().toLocaleTimeString());\nlet modal, closeBtn, libraryBtn;\n\n// Modal yüklendi mi diye sürekli kontrol eden fonksiyon\nfunction waitForModal() {\n  return new Promise(resolve => {\n    const check = () => {\n      modal = document.getElementById('movie-modal');\n      closeBtn = document.getElementById('modal-close-btn');\n      libraryBtn = document.getElementById('modal-library-btn');\n\n      if (modal && closeBtn && libraryBtn) {\n        setupModalEvents();\n        resolve();\n      } else {\n        requestAnimationFrame(check); // 60fps'de sürekli kontrol et\n      }\n    };\n    check();\n  });\n}\n\n// Modal event’lerini bir kere kur\nfunction setupModalEvents() {\n  closeBtn.addEventListener('click', closeModal);\n  modal.addEventListener('click', e => {\n    if (e.target.classList.contains('modal-backdrop')) closeModal();\n  });\n}\n\nfunction closeModal() {\n  modal.classList.remove('show');\n  document.body.style.overflow = '';\n  const wrapper = document.getElementById('modal-trailer-wrapper');\n  const iframe = document.getElementById('modal-trailer-iframe');\n  if (wrapper) wrapper.style.display = 'none';\n  if (iframe) iframe.src = '';\n}\n\n// Ana fonksiyon – artık her yerden güvenle çağırılabilir\nexport async function openMovieModal(movieId) {\n  console.log('openMovieModal çağrıldı, ID:', movieId); // ← BU LOG ÇOK ÖNEMLİ\n  await waitForModal(); // modal gelene kadar bekle\n\n  try {\n    const [movieRes, videoRes] = await Promise.all([\n      axios.get(\n        `${config.TMDB_BASE_URL}/movie/${movieId}?api_key=${config.TMDB_API_KEY}`\n      ),\n      axios.get(\n        `${config.TMDB_BASE_URL}/movie/${movieId}/videos?api_key=${config.TMDB_API_KEY}`\n      ),\n    ]);\n\n    const movie = movieRes.data;\n    const trailer = videoRes.data.results.find(\n      v => v.site === 'YouTube' && v.type === 'Trailer'\n    );\n\n    // Artık null olma ihtimali YOK\n    document.getElementById('modal-poster').src = movie.poster_path\n      ? `https://image.tmdb.org/t/p/w500${movie.poster_path}`\n      : './img/no-poster.jpg';\n\n    document.getElementById('modal-title').textContent = movie.title;\n    document.getElementById(\n      'modal-rating'\n    ).textContent = `${movie.vote_average.toFixed(1)} / ${movie.vote_count}`;\n    document.getElementById('modal-popularity').textContent = Math.round(\n      movie.popularity\n    );\n    document.getElementById('modal-release').textContent = formatDate(\n      movie.release_date\n    );\n    document.getElementById('modal-overview').textContent =\n      movie.overview || 'Açıklama yok.';\n\n    // Trailer gösterimi için kullanılan yapı\n    const trailerWrapper = document.getElementById('modal-trailer-wrapper');\n    const iframe = document.getElementById('modal-trailer-iframe');\n    if (trailer && trailerWrapper && iframe) {\n      trailerWrapper.style.display = 'block';\n      iframe.src = `https://www.youtube.com/embed/${trailer.key}?autoplay=1&rel=0`;\n    } else if (trailerWrapper) {\n      trailerWrapper.style.display = 'none';\n    }\n\n    // Kütüphaneye ekle butonu - addToLibrary ile birlikte localStorage içerisine verileri ekleyebildiğimiz bir sistem oluşturuyoruz.\n    libraryBtn.textContent = 'Add to my library';\n    libraryBtn.disabled = false;\n    libraryBtn.onclick = () => addToLibrary(movie);\n\n    modal.classList.add('show'); // flex’i aç\n    document.body.style.overflow = 'hidden';\n  } catch (err) {\n    console.error('Modal hatası:', err);\n    alert('Movie details could not be loaded!');\n  }\n}\n\nfunction formatDate(dateString) {\n  if (!dateString) return '—';\n  const months = [\n    'January',\n    'February',\n    'March',\n    'April',\n    'May',\n    'June',\n    'July',\n    'August',\n    'September',\n    'October',\n    'November',\n    'December',\n  ];\n  const d = new Date(dateString);\n  return `${d.getDate()} ${months[d.getMonth()]} ${d.getFullYear()}`;\n}\n\n// Add to my library fonksiyonu - LocalStorage içerisine mevcut filmlerin verilerini json oluşturup, oraya ekleyen bir yapı kuruldu.\nfunction addToLibrary(movie) {\n  const library = JSON.parse(localStorage.getItem('myMovieLibrary') || '[]');\n  if (library.some(m => m.id === movie.id)) {\n    alert('This movie is already in your library!');\n    return;\n  }\n  library.push(movie);\n  localStorage.setItem('myMovieLibrary', JSON.stringify(library));\n  alert(`${movie.title} added to your library.`);\n  libraryBtn.textContent = 'Added';\n  libraryBtn.disabled = true;\n}\n","// src/js/hero.js – KESİN ÇALIŞAN SON HALİ\n\n// main.js'de zaten tanımlı olan config'i tekrar import ediyoruz (çünkü main.js'den geliyor)\nimport config from '../config.js';\n\nconst API_KEY = config.TMDB_API_KEY;\nconst BASE_URL = config.TMDB_BASE_URL;\n\nasync function showRandomHeroMovie() {\n  try {\n    const res = await fetch(\n      `${BASE_URL}/trending/movie/week?api_key=${API_KEY}`\n    );\n\n    if (!res.ok) {\n      throw new Error(`API Hatası: ${res.status} ${res.statusText}`);\n    }\n\n    const data = await res.json();\n    const movies = data.results;\n\n    if (!movies || movies.length === 0) {\n      throw new Error('Film gelmedi');\n    }\n\n    const movie = movies[Math.floor(Math.random() * movies.length)];\n\n    // Trailer\n    const videoRes = await fetch(\n      `${BASE_URL}/movie/${movie.id}/videos?api_key=${API_KEY}`\n    );\n    const videoData = await videoRes.json();\n    const trailer = videoData.results?.find(\n      v => v.type === 'Trailer' && v.site === 'YouTube'\n    );\n\n    // DOM\n    document.getElementById('hero-default').style.display = 'none';\n    const heroRandom = document.getElementById('hero-random-movie');\n    heroRandom.style.display = 'flex';\n\n    if (movie.backdrop_path) {\n      heroRandom.style.backgroundImage = `ur[](https://image.tmdb.org/t/p/original${movie.backdrop_path})`;\n    }\n\n    heroRandom.querySelector('.hero-movie-title').textContent = movie.title;\n    heroRandom.querySelector('.hero-movie-details').textContent =\n      movie.overview || 'Açıklama yok.';\n\n    const poster = document.getElementById('hero-movie-poster');\n    poster.src = movie.poster_path\n      ? `https://image.tmdb.org/t/p/w500${movie.poster_path}`\n      : 'https://via.placeholder.com/500x750?text=No+Image';\n\n    // Yıldız\n    const starsContainer = heroRandom.querySelector('.hero-movie-stars');\n\n    starsContainer.innerHTML = ''; // önce temizle\n\n    const rating = Math.round(movie.vote_average || 0); // 0-10 arası\n    const fullStars = Math.floor(rating / 2);\n    const halfStars = rating % 2 ? 1 : 0;\n    const emptyStars = 5 - fullStars - halfStars;\n\n    // Helper: SVG use\n    function getStarSVG(type) {\n      return `<svg class=\"star-icon\" width=\"14\" height=\"14\"><use href=\"#${type}-star\"></use></svg>`;\n    }\n\n    // Full stars\n    for (let i = 0; i < fullStars; i++) {\n      starsContainer.innerHTML += getStarSVG('full');\n    }\n\n    // Half stars\n    for (let i = 0; i < halfStars; i++) {\n      starsContainer.innerHTML += getStarSVG('half');\n    }\n\n    // Empty stars\n    for (let i = 0; i < emptyStars; i++) {\n      starsContainer.innerHTML += getStarSVG('empty');\n    }\n\n    // Trailer butonu\n    const trailerBtn = document.getElementById('watch-trailer-btn');\n    if (trailerBtn && trailer) {\n      trailerBtn.onclick = () => {\n        const overlay = document.createElement('div');\n        overlay.className = 'movie-popup-overlay';\n        overlay.innerHTML = `\n          <div class=\"popup-video-wrapper\">\n            <iframe src=\"https://www.youtube.com/embed/${trailer.key}?autoplay=1\" \n                    allow=\"autoplay\" allowfullscreen></iframe>\n          </div>`;\n        document.body.appendChild(overlay);\n        overlay.onclick = () => overlay.remove();\n      };\n    }\n\n    // More details\n    document.getElementById('more-details-btn').onclick = () => {\n      if (typeof deleteHeroTrendsPopup === 'function') {\n        deleteHeroTrendsPopup(movie);\n      }\n    };\n  } catch (err) {\n    console.error('Hero yüklenemedi:', err);\n    document.getElementById('hero-default').style.display = 'block';\n    document.getElementById('hero-random-movie').style.display = 'none';\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', showRandomHeroMovie);\n","// main.js\n// Bu dosya home.html tarafından yükleniyor\n\n// 1. Axios zaten CDN'den geldi, hazır\n// 2. API anahtarını Vite gibi kullanıyoruz (senin .env dosyan varsa)\nimport config from './config.js';\nimport './js/hero.js';\nimport { openMovieModal } from './js/modal.js';\n\n// en üste ekle (config import’tan sonra)\nlet genreMap = {}; // {28: \"Aksiyon\", 12: \"Macera\", ...}\n\nconst API_KEY = config.TMDB_API_KEY;\nconst BASE_URL = config.TMDB_BASE_URL;\nconst IMAGE_BASE = config.TMDB_IMAGE_BASE_URL;\n// Örnek: const API_KEY = 'c8b152c90517e0e6f9c365d9e0e48c7e';\n\nasync function loadGenres() {\n  if (Object.keys(genreMap).length > 0) return; // zaten yüklendiyse tekrar çekme\n\n  try {\n    const response = await axios.get(\n      `${BASE_URL}/genre/movie/list?api_key=${API_KEY}`\n    );\n    response.data.genres.forEach(g => {\n      genreMap[g.id] = g.name;\n    });\n    console.log('Genres loaded:', genreMap);\n  } catch (err) {\n    console.error(\"Genres couldn't loaded:\", err);\n  }\n}\n\n// TMDB'den haftanın trend filmlerini çeken basit fonksiyon\nasync function getWeeklyTrends() {\n  try {\n    const response = await axios.get(\n      `${BASE_URL}/trending/movie/week?api_key=${API_KEY}`\n    );\n    return response.data.results;\n  } catch (error) {\n    console.error('API hatası:', error);\n    return [];\n  }\n}\n\n// Bu fonksiyonda rating için gerekli olan içleri boş, yarı-dolu ve tam-dolu olan yıldız svg'lerimizi formüllere göre kullanıyoruz.\nfunction createStars(rating) {\n  const score = rating / 2; // 10 üzerinden → 5 yıldız\n  const full = Math.floor(score);\n  const half = score - full >= 0.5 ? 1 : 0;\n  const empty = 5 - full - half;\n\n  let html = '';\n  for (let i = 0; i < full; i++)\n    html += `<li>\n        <svg width=\"14\" height=\"14\">\n            <use href=\"./img/sprite.svg#full-star\"></use>\n        </svg>\n    </li>`;\n  if (half)\n    html +=\n      '<li><svg width=\"14\" height=\"14\"><use href=\"./img/sprite.svg#half-star\"></use></svg></li>';\n  for (let i = 0; i < empty; i++)\n    html +=\n      '<li><svg width=\"14\" height=\"14\"><use href=\"./img/sprite.svg#empty-star\"></use></svg></li>';\n  return html;\n}\n\n// // Sayfa yüklendiğinde çalışacak ana fonksiyon\n// async function initHomePage() {\n//   console.log(\"Anasayfa yüklendi, API'den veri çekiliyor...\");\n\n//   const movies = await getWeeklyTrends();\n\n//   if (movies.length === 0) {\n//     console.log('Film gelmedi, internet veya API key kontrol et');\n//     return;\n//   }\n//  console.log(movies)\n//   // Şimdilik sadece ilk filme bakalım\n//   const firstMovie = movies[0];\n//   console.log('İlk film geldi:', firstMovie.title);\n\n//   // HTML'de ilk card'ın başlığını değiştirelim\n//   const firstCardTitle = document.querySelector('.home-movie-item .card-title');\n\n//   if (firstCardTitle) {\n//     firstCardTitle.textContent = firstMovie.title;\n//     console.log('Başlık başarıyla değiştirildi:', firstMovie.title);\n//   } else {\n//     console.log('card-title bulunamadı! card.html içeriğini kontrol et');\n//   }\n\n//   // 1) Başlık\n//   const titleEl = document.querySelector('.home-movie-item .card-title');\n//   if (titleEl) titleEl.textContent = firstMovie.title;\n\n//   // 2) YIL (yeni eklediğimiz)\n//   const year = firstMovie.release_date\n//     ? firstMovie.release_date.split('-')[0]\n//     : 'Bilinmiyor';\n\n//   const yearEl = document.querySelector('.home-movie-item .card-year');\n//   if (yearEl) {\n//     yearEl.textContent = year;\n//     console.log('Yıl eklendi:', year);\n//   } else {\n//     console.log(\n//       'card-year elementi bulunamadı! card.html\\'e <p class=\"card-year\"></p> ekle'\n//     );\n//   }\n\n//   // 3) POSTER FOTOĞRAFI (yeni eklediğimiz)\n//   const posterPath = firstMovie.poster_path;\n//   const posterUrl = posterPath\n//     ? `https://image.tmdb.org/t/p/w342${posterPath}` // w342 = güzel kart boyutu\n//     : './img/no-poster.jpg'; // yedek resim\n\n//   const imgEl = document.querySelector('.home-movie-item .card-image');\n//   if (imgEl) {\n//     imgEl.src = posterUrl;\n//     imgEl.alt = firstMovie.title + ' poster';\n//     console.log('Poster eklendi:', posterUrl);\n//   } else {\n//     console.log('card-image bulunamadı!');\n//   }\n// }\n\nasync function initHomePage() {\n  console.log(\"Anasayfa yüklendi, API'den veri çekiliyor...\");\n\n  await loadGenres(); // önce türleri yükle\n\n  const movies = await getWeeklyTrends(); // haftanın popüler filmlerini yükle ve movies değişkenine ata\n  console.log('Movies list' + JSON.stringify(movies.map(movie => movie.title)));\n\n  await loadUpcomingMovie(); // upcoming this month filmlerini yükle\n\n  if (movies.length === 0) return;\n\n  // İlk 3 haftanın filmini çekmek için\n  const weeklyMovies = movies.slice(0, 3);\n\n  // Tüm kartları seç (3 tane home-movie-item var)\n  const cardContainers = document.querySelectorAll('.home-movie-item');\n\n  // Haftanın filmlerini içeren array'i gezerek, her bir indexteki elemanın özelliklerini container yapısında buluyoruz\n  weeklyMovies.forEach((movie, index) => {\n    const card = cardContainers[index];\n    if (!card) return;\n\n    // Başlık - Eğer .card-title class'ına sahip bir eleman var ise, bu elemanın içine, API'deki haftanın trendlerinde yer alan her filmin isim bilgisini atıyoruz.\n    const titleEl = card.querySelector('.card-title');\n    if (titleEl) titleEl.textContent = movie.title || movie.name;\n\n    // Yıl - Eğer .card-year class'ına sahip bir eleman var ise, bu elemanın içine, API'deki haftanın trendlerinde yer alan her filmin, \"-\"den sonraki ilk elemanı olan yıl bilgisini atıyoruz.\n    const year = movie.release_date ? movie.release_date.split('-')[0] : '—';\n    const yearEl = card.querySelector('.card-year');\n    if (yearEl) yearEl.textContent = year;\n\n    // Poster - Eğer .card-image class'ına sahip bir eleman var ise, bu elemanın içine, API'deki haftanın trendlerinde yer alan her filmin poster bilgisini atıyoruz.\n    const posterUrl = movie.poster_path\n      ? `${IMAGE_BASE}/w342${movie.poster_path}`\n      : './img/no-poster.jpg';\n    const imgEl = card.querySelector('.card-image');\n    if (imgEl) {\n      imgEl.src = posterUrl;\n      imgEl.alt = `${movie.title} poster`;\n    }\n\n    // Genre (en fazla 2 tür gösterelim) - API'deki haftanın trendlerinde yer alan her filmin, id'sine göre gezerek, içeriğindeki ilk iki değeri alıp, genreMap objesi içerisine ekleten ve bu genre bilgisini, eğer .card-genre class'ına sahip bir eleman var ise, bu elemanın içine atıyoruz.\n    const genres = movie.genre_ids\n      .slice(0, 2)\n      .map(id => genreMap[id] || 'Bilinmiyor')\n      .join(', ');\n    const genreEl = card.querySelector('.card-genre');\n    if (genreEl) genreEl.textContent = genres || 'No genres';\n\n    // Rating (yıldızlar) - Öncelikle createStars fonksiyonunda rating hesaplaması mantığını kuruyoruz ve eğer .card-rating class'ına sahip bir eleman var ise, bu elemanın içine, API'deki haftanın trendlerinde yer alan her filmin rating bilgisini atıyoruz.\n    const ratingEl = card.querySelector('.card-rating');\n    if (ratingEl) {\n      ratingEl.innerHTML = createStars(movie.vote_average);\n    }\n    card.style.cursor = 'pointer';\n    card.addEventListener('click', e => {\n      e.preventDefault();\n      e.stopPropagation();\n      console.log('Karta tıklandı, ID:', movie.id); // ← bu logu göreceksin\n      openMovieModal(movie.id);\n    });\n  });\n\n  console.log('3 kart başarıyla dolduruldu!');\n}\n\n// ===== UPCOMING THIS MONTH =====\nasync function loadUpcomingMovie() {\n  try {\n    const response = await axios.get(\n      `${config.TMDB_BASE_URL}/movie/upcoming?api_key=${config.TMDB_API_KEY}&page=1`\n    );\n\n    // Bugün ve sonrası olan filmleri alalım\n    const now = new Date().toISOString().split('T')[0];\n    const futureMovies = response.data.results.filter(\n      movie => movie.release_date >= now\n    );\n\n    if (futureMovies.length === 0) {\n      console.log('There are no upcoming movies this month!');\n      return;\n    }\n\n    // Rastgele bir tane seç\n    const movie = futureMovies[Math.floor(Math.random() * futureMovies.length)];\n\n    // Elementleri doldur\n    document.getElementById('upcoming-poster').src = movie.poster_path\n      ? `https://image.tmdb.org/t/p/w500${movie.poster_path}`\n      : './img/no-poster.jpg';\n\n    document.getElementById('upcoming-title').textContent = movie.title;\n    document.getElementById('upcoming-release').textContent = movie.release_date\n      ? formatDate(movie.release_date)\n      : '—';\n    document.getElementById('upcoming-vote').textContent =\n      movie.vote_average.toFixed(1);\n    document.getElementById('upcoming-votes').textContent = movie.vote_count;\n    document.getElementById('upcoming-popularity').textContent = Math.round(\n      movie.popularity\n    );\n\n    // Genre\n    const genres = movie.genre_ids\n      .slice(0, 2)\n      .map(id => genreMap[id] || 'Bilinmiyor')\n      .join(', ');\n    document.getElementById('upcoming-genre').textContent = genres;\n\n    console.log('Film Açıklaması' + movie.overview);\n    // Overview\n    document\n      .getElementById('upcoming-overview-content')\n      .querySelector('p').textContent =\n      movie.overview || \"Movie overview couldn't find!\";\n\n    console.log('Upcoming movie yüklendi:', movie.title);\n\n    // Butona film bilgisini ekleyelim (sonraki adımda kullanacağız)\n    const btn = document.getElementById('upcoming-library-btn');\n    btn.dataset.movieId = movie.id;\n  } catch (err) {\n    console.error('Upcoming movie yüklenemedi', err);\n  }\n}\n\n// Güzel tarih formatı: 03 Mart 2025\nfunction formatDate(dateString) {\n  const months = [\n    'January',\n    'February',\n    'March',\n    'April',\n    'May',\n    'June',\n    'July',\n    'August',\n    'September',\n    'October',\n    'November',\n    'December',\n  ];\n  const date = new Date(dateString);\n  return `${date.getDate()} ${months[date.getMonth()]} ${date.getFullYear()}`;\n}\n\n// ===== LOCALSTORAGE - KÜTÜPHANE =====\nconst LIBRARY_KEY = 'myMovieLibrary';\n\nfunction getLibrary() {\n  return JSON.parse(localStorage.getItem(LIBRARY_KEY)) || [];\n}\n\nfunction addToLibrary(movie) {\n  const library = getLibrary();\n  if (!library.find(m => m.id === movie.id)) {\n    library.push(movie);\n    localStorage.setItem(LIBRARY_KEY, JSON.stringify(library));\n    alert(`${movie.title} added to your library.`);\n  } else {\n    alert('This movie is already in your library!');\n  }\n}\n\n// Tüm \"Add to my library\" butonları\ndocument.addEventListener('click', async function (e) {\n  if (\n    e.target.id === 'upcoming-library-btn' ||\n    e.target.classList.contains('card-library-btn')\n  ) {\n    const movieId = e.target.dataset.movieId;\n\n    if (!movieId) return;\n\n    try {\n      const res = await axios.get(\n        `${config.TMDB_BASE_URL}/movie/${movieId}?api_key=${config.TMDB_API_KEY}`\n      );\n      addToLibrary(res.data);\n      e.target.textContent = 'Remove from my library';\n      e.target.disabled = true;\n    } catch (err) {\n      alert('An error occurred while adding the movie.');\n    }\n  }\n});\n\n// Sayfa tamamen yüklendiğinde çalışsın\ndocument.addEventListener('DOMContentLoaded', initHomePage);\n"],"names":["config","modal","closeBtn","libraryBtn","waitForModal","resolve","check","setupModalEvents","closeModal","wrapper","iframe","openMovieModal","movieId","movieRes","videoRes","movie","trailer","v","formatDate","trailerWrapper","addToLibrary","err","dateString","months","d","library","m","API_KEY","BASE_URL","showRandomHeroMovie","getStarSVG","type","res","movies","_a","heroRandom","poster","starsContainer","rating","fullStars","halfStars","emptyStars","i","trailerBtn","overlay","genreMap","IMAGE_BASE","loadGenres","g","getWeeklyTrends","error","createStars","score","full","half","empty","html","initHomePage","loadUpcomingMovie","weeklyMovies","cardContainers","index","card","titleEl","year","yearEl","posterUrl","imgEl","genres","id","genreEl","ratingEl","e","response","now","futureMovies","btn","date","LIBRARY_KEY","getLibrary"],"mappings":"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"}