(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();const d={TMDB_API_KEY:"532c164e7aaa985e6a97f7fc762d2aea",TMDB_BASE_URL:"https://api.themoviedb.org/3",TMDB_IMAGE_BASE_URL:"https://image.tmdb.org/t/p"};console.log("YENİ MODAL.JS YÜKLENDİ - "+new Date().toLocaleTimeString());let s,c,i;function y(){return new Promise(t=>{const e=()=>{s=document.getElementById("movie-modal"),c=document.getElementById("modal-close-btn"),i=document.getElementById("modal-library-btn"),s&&c&&i?(p(),t()):requestAnimationFrame(e)};e()})}function p(){c.addEventListener("click",u),s.addEventListener("click",t=>{t.target.classList.contains("modal-backdrop")&&u()})}function u(){s.classList.remove("show"),document.body.style.overflow="";const t=document.getElementById("modal-trailer-wrapper"),e=document.getElementById("modal-trailer-iframe");t&&(t.style.display="none"),e&&(e.src="")}async function b(t){console.log("openMovieModal çağrıldı, ID:",t),await y();try{const[e,n]=await Promise.all([axios.get(`${d.TMDB_BASE_URL}/movie/${t}?api_key=${d.TMDB_API_KEY}`),axios.get(`${d.TMDB_BASE_URL}/movie/${t}/videos?api_key=${d.TMDB_API_KEY}`)]),a=e.data,o=n.data.results.find(m=>m.site==="YouTube"&&m.type==="Trailer");document.getElementById("modal-poster").src=a.poster_path?`https://image.tmdb.org/t/p/w500${a.poster_path}`:"./img/no-poster.jpg",document.getElementById("modal-title").textContent=a.title,document.getElementById("modal-rating").textContent=`${a.vote_average.toFixed(1)} / ${a.vote_count}`,document.getElementById("modal-popularity").textContent=Math.round(a.popularity),document.getElementById("modal-release").textContent=f(a.release_date),document.getElementById("modal-overview").textContent=a.overview||"Açıklama yok.";const r=document.getElementById("modal-trailer-wrapper"),l=document.getElementById("modal-trailer-iframe");o&&r&&l?(r.style.display="block",l.src=`https://www.youtube.com/embed/${o.key}?autoplay=1&rel=0`):r&&(r.style.display="none"),i.textContent="Add to my library",i.disabled=!1,i.onclick=()=>g(a),s.classList.add("show"),document.body.style.overflow="hidden"}catch(e){console.error("Modal hatası:",e),alert("Movie details could not be loaded!")}}function f(t){if(!t)return"—";const e=["January","February","March","April","May","June","July","August","September","October","November","December"],n=new Date(t);return`${n.getDate()} ${e[n.getMonth()]} ${n.getFullYear()}`}function g(t){const e=JSON.parse(localStorage.getItem("myMovieLibrary")||"[]");if(e.some(n=>n.id===t.id)){alert("This movie is already in your library!");return}e.push(t),localStorage.setItem("myMovieLibrary",JSON.stringify(e)),alert(`${t.title} added to your library.`),i.textContent="Added",i.disabled=!0}export{d as c,b as o};
//# sourceMappingURL=modal-C75sch9z.js.map
