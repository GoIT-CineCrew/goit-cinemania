{"version":3,"file":"main-CPLaSqab.js","sources":["../../src/config.js","../../src/main.js"],"sourcesContent":["const config = {\n  TMDB_API_KEY: '532c164e7aaa985e6a97f7fc762d2aea',\n  TMDB_BASE_URL: 'https://api.themoviedb.org/3',\n  TMDB_IMAGE_BASE_URL: 'https://image.tmdb.org/t/p',\n};\n\nexport default config;\n","// main.js\n// Bu dosya home.html tarafından yükleniyor\n\n// 1. Axios zaten CDN'den geldi, hazır\n// 2. API anahtarını Vite gibi kullanıyoruz (senin .env dosyan varsa)\nimport config from './config.js';\n\n// main.js – en üste ekle (config import’tan sonra)\nlet genreMap = {}; // {28: \"Aksiyon\", 12: \"Macera\", ...}\n\nconst API_KEY = config.TMDB_API_KEY;\nconst BASE_URL = config.TMDB_BASE_URL;\nconst IMAGE_BASE = config.TMDB_IMAGE_BASE_URL;\n// Örnek: const API_KEY = 'c8b152c90517e0e6f9c365d9e0e48c7e';\n\nasync function loadGenres() {\n  if (Object.keys(genreMap).length > 0) return; // zaten yüklendiyse tekrar çekme\n\n  try {\n    const response = await axios.get(\n      `${BASE_URL}/genre/movie/list?api_key=${API_KEY}&language=tr-TR`\n    );\n    response.data.genres.forEach(g => {\n      genreMap[g.id] = g.name;\n    });\n    console.log('Türler yüklendi:', genreMap);\n  } catch (err) {\n    console.error('Türler yüklenemedi', err);\n  }\n}\n\n// TMDB'den haftanın trend filmlerini çeken basit fonksiyon\nasync function getWeeklyTrends() {\n  try {\n    const response = await axios.get(\n      `${BASE_URL}/trending/movie/week?api_key=${API_KEY}&language=tr-TR`\n    );\n    return response.data.results;\n  } catch (error) {\n    console.error('API hatası:', error);\n    return [];\n  }\n}\n\nfunction createStars(rating) {\n  const score = rating / 2; // 10 üzerinden → 5 yıldız\n  const full = Math.floor(score);\n  const half = score - full >= 0.5 ? 1 : 0;\n  const empty = 5 - full - half;\n\n  let html = '';\n  for (let i = 0; i < full; i++)\n    html += \n    `<li>\n        <svg width=\"14\" height=\"14\">\n            <use href=\"./img/sprite.svg#full-star\"></use>\n        </svg>\n    </li>`;\n  if (half)\n    html +=\n      '<li><svg width=\"14\" height=\"14\"><use href=\"./img/sprite.svg#half-star\"></use></svg></li>';\n  for (let i = 0; i < empty; i++)\n    html +=\n      '<li><svg width=\"14\" height=\"14\"><use href=\"./img/sprite.svg#empty-star\"></use></svg></li>';\n  return html;\n}\n\n// // Sayfa yüklendiğinde çalışacak ana fonksiyon\n// async function initHomePage() {\n//   console.log(\"Anasayfa yüklendi, API'den veri çekiliyor...\");\n\n//   const movies = await getWeeklyTrends();\n\n//   if (movies.length === 0) {\n//     console.log('Film gelmedi, internet veya API key kontrol et');\n//     return;\n//   }\n\n//   // Şimdilik sadece ilk filme bakalım\n//   const firstMovie = movies[0];\n//   console.log('İlk film geldi:', firstMovie.title);\n\n//   // HTML'de ilk card'ın başlığını değiştirelim\n//   const firstCardTitle = document.querySelector('.home-movie-item .card-title');\n\n//   if (firstCardTitle) {\n//     firstCardTitle.textContent = firstMovie.title;\n//     console.log('Başlık başarıyla değiştirildi:', firstMovie.title);\n//   } else {\n//     console.log('card-title bulunamadı! card.html içeriğini kontrol et');\n//   }\n\n//   // 1) Başlık\n//   const titleEl = document.querySelector('.home-movie-item .card-title');\n//   if (titleEl) titleEl.textContent = firstMovie.title;\n\n//   // 2) YIL (yeni eklediğimiz)\n//   const year = firstMovie.release_date\n//     ? firstMovie.release_date.split('-')[0]\n//     : 'Bilinmiyor';\n\n//   const yearEl = document.querySelector('.home-movie-item .card-year');\n//   if (yearEl) {\n//     yearEl.textContent = year;\n//     console.log('Yıl eklendi:', year);\n//   } else {\n//     console.log(\n//       'card-year elementi bulunamadı! card.html\\'e <p class=\"card-year\"></p> ekle'\n//     );\n//   }\n\n//   // 3) POSTER FOTOĞRAFI (yeni eklediğimiz)\n//   const posterPath = firstMovie.poster_path;\n//   const posterUrl = posterPath\n//     ? `https://image.tmdb.org/t/p/w342${posterPath}` // w342 = güzel kart boyutu\n//     : './img/no-poster.jpg'; // yedek resim\n\n//   const imgEl = document.querySelector('.home-movie-item .card-image');\n//   if (imgEl) {\n//     imgEl.src = posterUrl;\n//     imgEl.alt = firstMovie.title + ' poster';\n//     console.log('Poster eklendi:', posterUrl);\n//   } else {\n//     console.log('card-image bulunamadı!');\n//   }\n// }\n\n// main.js – initHomePage fonksiyonunu tamamen bununla değiştir\nasync function initHomePage() {\n  console.log(\"Anasayfa yüklendi, API'den veri çekiliyor...\");\n\n  await loadGenres(); // önce türleri yükle\n  const movies = await getWeeklyTrends();\n\n  if (movies.length === 0) return;\n\n  // İlk 3 filmi alalım\n  const weeklyMovies = movies.slice(0, 3);\n\n  // Tüm kartları seç (3 tane home-movie-item var)\n  const cardContainers = document.querySelectorAll('.home-movie-item');\n\n  weeklyMovies.forEach((movie, index) => {\n    const card = cardContainers[index];\n    if (!card) return;\n\n    // Başlık\n    const titleEl = card.querySelector('.card-title');\n    if (titleEl) titleEl.textContent = movie.title || movie.name;\n\n    // Yıl\n    const year = movie.release_date ? movie.release_date.split('-')[0] : '—';\n    const yearEl = card.querySelector('.card-year');\n    if (yearEl) yearEl.textContent = year;\n\n    // Poster\n    const posterUrl = movie.poster_path\n      ? `${IMAGE_BASE}/w342${movie.poster_path}`\n      : './img/no-poster.jpg';\n    const imgEl = card.querySelector('.card-image');\n    if (imgEl) {\n      imgEl.src = posterUrl;\n      imgEl.alt = `${movie.title} poster`;\n    }\n\n    // Genre (en fazla 2 tür gösterelim)\n    const genres = movie.genre_ids\n      .slice(0, 2)\n      .map(id => genreMap[id] || 'Bilinmiyor')\n      .join(', ');\n    const genreEl = card.querySelector('.card-genre');\n    if (genreEl) genreEl.textContent = genres || 'Tür yok';\n\n    // Rating (yıldızlar)\n    const ratingEl = card.querySelector('.card-rating');\n    if (ratingEl) {\n      ratingEl.innerHTML = createStars(movie.vote_average);\n    }\n  });\n\n  console.log('3 kart başarıyla dolduruldu!');\n}\n\n// Sayfa tamamen yüklendiğinde çalışsın\ndocument.addEventListener('DOMContentLoaded', initHomePage);\n"],"names":["config","genreMap","API_KEY","BASE_URL","IMAGE_BASE","loadGenres","g","err","getWeeklyTrends","error","createStars","rating","score","full","half","empty","html","i","initHomePage","movies","weeklyMovies","cardContainers","movie","index","card","titleEl","year","yearEl","posterUrl","imgEl","genres","id","genreEl","ratingEl"],"mappings":"ssBAAA,MAAMA,EAAS,CACb,aAAc,mCACd,cAAe,+BACf,oBAAqB,4BACvB,ECIA,IAAIC,EAAW,CAAA,EAEf,MAAMC,EAAUF,EAAO,aACjBG,EAAWH,EAAO,cAClBI,EAAaJ,EAAO,oBAG1B,eAAeK,GAAa,CAC1B,GAAI,SAAO,KAAKJ,CAAQ,EAAE,OAAS,GAEnC,GAAI,EACe,MAAM,MAAM,IAC3B,GAAGE,CAAQ,6BAA6BD,CAAO,iBACrD,GACa,KAAK,OAAO,QAAQI,GAAK,CAChCL,EAASK,EAAE,EAAE,EAAIA,EAAE,IACzB,CAAK,EACD,QAAQ,IAAI,mBAAoBL,CAAQ,CACzC,OAAQM,EAAK,CACZ,QAAQ,MAAM,qBAAsBA,CAAG,CACxC,CACH,CAGA,eAAeC,GAAkB,CAC/B,GAAI,CAIF,OAHiB,MAAM,MAAM,IAC3B,GAAGL,CAAQ,gCAAgCD,CAAO,iBACxD,GACoB,KAAK,OACtB,OAAQO,EAAO,CACd,eAAQ,MAAM,cAAeA,CAAK,EAC3B,EACR,CACH,CAEA,SAASC,EAAYC,EAAQ,CAC3B,MAAMC,EAAQD,EAAS,EACjBE,EAAO,KAAK,MAAMD,CAAK,EACvBE,EAAOF,EAAQC,GAAQ,GAAM,EAAI,EACjCE,EAAQ,EAAIF,EAAOC,EAEzB,IAAIE,EAAO,GACX,QAASC,EAAI,EAAGA,EAAIJ,EAAMI,IACxBD,GACA;AAAA;AAAA;AAAA;AAAA,WAKEF,IACFE,GACE,4FACJ,QAASC,EAAI,EAAGA,EAAIF,EAAOE,IACzBD,GACE,4FACJ,OAAOA,CACT,CA+DA,eAAeE,GAAe,CAC5B,QAAQ,IAAI,8CAA8C,EAE1D,MAAMb,EAAU,EAChB,MAAMc,EAAS,MAAMX,IAErB,GAAIW,EAAO,SAAW,EAAG,OAGzB,MAAMC,EAAeD,EAAO,MAAM,EAAG,CAAC,EAGhCE,EAAiB,SAAS,iBAAiB,kBAAkB,EAEnED,EAAa,QAAQ,CAACE,EAAOC,IAAU,CACrC,MAAMC,EAAOH,EAAeE,CAAK,EACjC,GAAI,CAACC,EAAM,OAGX,MAAMC,EAAUD,EAAK,cAAc,aAAa,EAC5CC,IAASA,EAAQ,YAAcH,EAAM,OAASA,EAAM,MAGxD,MAAMI,EAAOJ,EAAM,aAAeA,EAAM,aAAa,MAAM,GAAG,EAAE,CAAC,EAAI,IAC/DK,EAASH,EAAK,cAAc,YAAY,EAC1CG,IAAQA,EAAO,YAAcD,GAGjC,MAAME,EAAYN,EAAM,YACpB,GAAGlB,CAAU,QAAQkB,EAAM,WAAW,GACtC,sBACEO,EAAQL,EAAK,cAAc,aAAa,EAC1CK,IACFA,EAAM,IAAMD,EACZC,EAAM,IAAM,GAAGP,EAAM,KAAK,WAI5B,MAAMQ,EAASR,EAAM,UAClB,MAAM,EAAG,CAAC,EACV,IAAIS,GAAM9B,EAAS8B,CAAE,GAAK,YAAY,EACtC,KAAK,IAAI,EACNC,EAAUR,EAAK,cAAc,aAAa,EAC5CQ,IAASA,EAAQ,YAAcF,GAAU,WAG7C,MAAMG,EAAWT,EAAK,cAAc,cAAc,EAC9CS,IACFA,EAAS,UAAYvB,EAAYY,EAAM,YAAY,EAEzD,CAAG,EAED,QAAQ,IAAI,8BAA8B,CAC5C,CAGA,SAAS,iBAAiB,mBAAoBJ,CAAY"}