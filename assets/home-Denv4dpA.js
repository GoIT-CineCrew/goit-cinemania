import{c,o as E}from"./theme-Bh1W3b2d.js";let d={};const y=c.TMDB_API_KEY,f=c.TMDB_BASE_URL,b=c.TMDB_IMAGE_BASE_URL;async function w(){if(!(Object.keys(d).length>0))try{(await axios.get(`${f}/genre/movie/list?api_key=${y}`)).data.genres.forEach(o=>{d[o.id]=o.name})}catch(e){console.error("Genres couldn't loaded:",e)}}async function M(){try{return(await axios.get(`${f}/trending/movie/week?api_key=${y}`)).data.results}catch(e){return console.error("API hatası:",e),[]}}function B(e,o=!1){const n=e/2,t=Math.floor(n),a=n-t>=.5,r=5-t-(a?1:0);let s="";for(let i=0;i<t;i++)s+='<li><svg class="star-svg"><use href="./img/sprite.svg#full-star"></use></svg></li>';a&&(s+='<li><svg class="star-svg"><use href="./img/sprite.svg#half-star"></use></svg></li>');for(let i=0;i<r;i++)s+='<li><svg class="star-svg"><use href="./img/sprite.svg#empty-star"></use></svg></li>';return s}async function I(){await w();const e=await M();if(await x(),e.length===0)return;const o=e.slice(0,3),n=document.querySelectorAll(".home-movie-item");o.forEach((t,a)=>{const r=n[a];if(!r)return;const s=r.querySelector(".card-title");s&&(s.textContent=t.title||t.name);const i=t.release_date?t.release_date.split("-")[0]:"—",l=r.querySelector(".card-year");l&&(l.textContent=i);const h=t.poster_path?`${b}/w342${t.poster_path}`:"./img/no-poster.jpg",m=r.querySelector(".card-image");m&&(m.src=h,m.alt=`${t.title} poster`);const _=t.genre_ids.slice(0,2).map(g=>d[g]||"Bilinmiyor").join(", "),u=r.querySelector(".card-genre");u&&(u.textContent=_||"No genres");const p=r.querySelector(".card-rating");p&&(p.innerHTML=B(t.vote_average)),r.style.cursor="pointer",r.addEventListener("click",g=>{g.preventDefault(),g.stopPropagation(),E(t.id)})})}async function x(){try{const e=await axios.get(`${c.TMDB_BASE_URL}/movie/upcoming?api_key=${c.TMDB_API_KEY}&page=1`),o=new Date().toISOString().split("T")[0],n=e.data.results.filter(l=>l.release_date>=o);if(n.length===0)return;const t=n[Math.floor(Math.random()*n.length)],a=t.poster_path||"",r=document.getElementById("upcoming-poster");a?(r.srcset=`
    https://image.tmdb.org/t/p/w342${a} 342w,
    https://image.tmdb.org/t/p/w500${a} 500w,
    https://image.tmdb.org/t/p/w780${a} 780w,
    https://image.tmdb.org/t/p/original${a} 1280w
  `,r.sizes="(max-width: 767px) 90vw, (max-width: 1279px) 704px, 805px",r.src=`https://image.tmdb.org/t/p/w780${a}`,r.alt=`${t.title} poster`):(r.src="./img/no-poster.jpg",r.removeAttribute("srcset"),r.removeAttribute("sizes")),document.getElementById("upcoming-title").textContent=t.title,document.getElementById("upcoming-release").textContent=t.release_date?$(t.release_date):"—",document.getElementById("upcoming-vote").textContent=t.vote_average.toFixed(1),document.getElementById("upcoming-votes").textContent=t.vote_count,document.getElementById("upcoming-popularity").textContent=Math.round(t.popularity);const s=t.genre_ids.slice(0,2).map(l=>d[l]||"Bilinmiyor").join(", ");document.getElementById("upcoming-genre").textContent=s,document.getElementById("upcoming-overview-content").querySelector("p").textContent=t.overview||"Movie overview couldn't find!";const i=document.getElementById("upcoming-library-btn");i.dataset.movieId=t.id}catch(e){console.error("Upcoming movie yüklenemedi",e)}}function $(e){const o=["January","February","March","April","May","June","July","August","September","October","November","December"],n=new Date(e);return`${n.getDate()} ${o[n.getMonth()]} ${n.getFullYear()}`}const v="myMovieLibrary";function S(){return JSON.parse(localStorage.getItem(v))||[]}function A(e){const o=S();o.find(n=>n.id===e.id)?alert("This movie is already in your library!"):(o.push(e),localStorage.setItem(v,JSON.stringify(o)),alert(`${e.title} added to your library.`))}document.addEventListener("click",async function(e){if(e.target.id==="upcoming-library-btn"||e.target.classList.contains("card-library-btn")){const o=e.target.dataset.movieId;if(!o)return;try{const n=await axios.get(`${c.TMDB_BASE_URL}/movie/${o}?api_key=${c.TMDB_API_KEY}`);A(n.data),e.target.textContent="Remove from my library",e.target.disabled=!0}catch{alert("An error occurred while adding the movie.")}}});document.addEventListener("DOMContentLoaded",I);
//# sourceMappingURL=home-Denv4dpA.js.map
