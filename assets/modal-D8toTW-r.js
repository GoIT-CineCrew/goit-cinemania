(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function i(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(e){if(e.ep)return;e.ep=!0;const n=i(e);fetch(e.href,n)}})();const d={TMDB_API_KEY:"532c164e7aaa985e6a97f7fc762d2aea",TMDB_BASE_URL:"https://api.themoviedb.org/3",TMDB_IMAGE_BASE_URL:"https://image.tmdb.org/t/p"},E=d.TMDB_API_KEY,w=d.TMDB_BASE_URL;async function I(){var o;try{let y=function(r){return`<svg class="star-icon" width="14" height="14"><use href="#${r}-star"></use></svg>`};const t=await fetch(`${w}/trending/movie/week?api_key=${E}`);if(!t.ok)throw new Error(`API Hatası: ${t.status} ${t.statusText}`);const a=(await t.json()).results;if(!a||a.length===0)throw new Error("Film gelmedi");const e=a[Math.floor(Math.random()*a.length)],c=(o=(await(await fetch(`${w}/movie/${e.id}/videos?api_key=${E}`)).json()).results)==null?void 0:o.find(r=>r.type==="Trailer"&&r.site==="YouTube");document.getElementById("hero-default").style.display="none";const m=document.getElementById("hero-random-movie");m.style.display="flex",e.backdrop_path&&(m.style.backgroundImage=`url(https://image.tmdb.org/t/p/original${e.backdrop_path})`),m.querySelector(".hero-movie-title").textContent=e.title,m.querySelector(".hero-movie-details").textContent=e.overview||"Açıklama yok.";const M=document.getElementById("hero-movie-poster");M.src=e.poster_path?`https://image.tmdb.org/t/p/w500${e.poster_path}`:"https://via.placeholder.com/500x750?text=No+Image";const p=m.querySelector(".hero-movie-stars");p.innerHTML="";const g=Math.round(e.vote_average||0),h=Math.floor(g/2),v=g%2?1:0,_=5-h-v;for(let r=0;r<h;r++)p.innerHTML+=y("full");for(let r=0;r<v;r++)p.innerHTML+=y("half");for(let r=0;r<_;r++)p.innerHTML+=y("empty");const b=document.getElementById("watch-trailer-btn");b&&c&&(b.onclick=()=>{const r=document.createElement("div");r.className="movie-popup-overlay",r.innerHTML=`
          <div class="popup-video-wrapper">
            <iframe src="https://www.youtube.com/embed/${c.key}?autoplay=1" allow="autoplay" allowfullscreen></iframe>
          </div>`,document.body.appendChild(r),r.onclick=()=>r.remove()}),document.getElementById("more-details-btn").onclick=()=>{typeof deleteHeroTrendsPopup=="function"&&deleteHeroTrendsPopup(e)}}catch(t){console.error("Hero yüklenemedi:",t),document.getElementById("hero-default").style.display="block",document.getElementById("hero-random-movie").style.display="none"}}document.addEventListener("DOMContentLoaded",I);console.log("YENİ MODAL.JS YÜKLENDİ - "+new Date().toLocaleTimeString());let u,f,s;function L(){return new Promise(o=>{const t=()=>{u=document.getElementById("movie-modal"),f=document.getElementById("modal-close-btn"),s=document.getElementById("modal-library-btn"),u&&f&&s?($(),o()):requestAnimationFrame(t)};t()})}function $(){f.addEventListener("click",B),u.addEventListener("click",o=>{o.target.classList.contains("modal-backdrop")&&B()})}function B(){u.classList.remove("show"),document.body.style.overflow="";const o=document.getElementById("modal-trailer-wrapper"),t=document.getElementById("modal-trailer-iframe");o&&(o.style.display="none"),t&&(t.src="")}async function k(o){console.log("openMovieModal çağrıldı, ID:",o),await L();try{const[t,i]=await Promise.all([axios.get(`${d.TMDB_BASE_URL}/movie/${o}?api_key=${d.TMDB_API_KEY}`),axios.get(`${d.TMDB_BASE_URL}/movie/${o}/videos?api_key=${d.TMDB_API_KEY}`)]),a=t.data,e=i.data.results.find(c=>c.site==="YouTube"&&c.type==="Trailer");document.getElementById("modal-poster").src=a.poster_path?`https://image.tmdb.org/t/p/w500${a.poster_path}`:"./img/no-poster.jpg",document.getElementById("modal-title").textContent=a.title,document.getElementById("modal-rating").textContent=`${a.vote_average.toFixed(1)} / ${a.vote_count}`,document.getElementById("modal-popularity").textContent=Math.round(a.popularity),document.getElementById("modal-release").textContent=T(a.release_date),document.getElementById("modal-overview").textContent=a.overview||"Açıklama yok.";const n=document.getElementById("modal-trailer-wrapper"),l=document.getElementById("modal-trailer-iframe");e&&n&&l?(n.style.display="block",l.src=`https://www.youtube.com/embed/${e.key}?autoplay=1&rel=0`):n&&(n.style.display="none"),s.textContent="Add to my library",s.disabled=!1,s.onclick=()=>A(a),u.classList.add("show"),document.body.style.overflow="hidden"}catch(t){console.error("Modal hatası:",t),alert("Movie details could not be loaded!")}}function T(o){if(!o)return"—";const t=["January","February","March","April","May","June","July","August","September","October","November","December"],i=new Date(o);return`${i.getDate()} ${t[i.getMonth()]} ${i.getFullYear()}`}function A(o){const t=JSON.parse(localStorage.getItem("myMovieLibrary")||"[]");if(t.some(i=>i.id===o.id)){alert("This movie is already in your library!");return}t.push(o),localStorage.setItem("myMovieLibrary",JSON.stringify(t)),alert(`${o.title} added to your library.`),s.textContent="Added",s.disabled=!0}export{d as c,k as o};
//# sourceMappingURL=modal-D8toTW-r.js.map
