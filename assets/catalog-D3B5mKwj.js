import{o as E}from"./modal-DSgPRClB.js";const f={},d="aaf24ac7ab7c5211361a71263e777bb9",u="https://api.themoviedb.org/3",k="https://image.tmdb.org/t/p/w500",L=document.querySelector(".catalog-movie-items"),h=document.querySelector(".catalog-search input"),_=document.querySelector(".search-icon"),S=document.querySelector(".clear-button"),w=document.querySelectorAll(".catalog-dropdown-filter .option");let c=null;const a=document.querySelector(".catalog-dropdown-filter"),p=a.querySelector(".selected"),g=a.querySelector(".options"),l=a.querySelectorAll(".option");p.addEventListener("click",()=>{const e=a.classList.toggle("open");g.style.display=e?"block":"none"});w.forEach(e=>{e.addEventListener("click",()=>{p.childNodes[0].textContent=e.textContent,c=e.dataset.value||null,a.classList.remove("open"),g.style.display="none"})});document.addEventListener("click",e=>{a.contains(e.target)||(a.classList.remove("open"),g.style.display="none")});async function $(){if(!(Object.keys(f).length>0))try{(await axios.get(`${u}/genre/movie/list`,{params:{api_key:d,language:"en-US"}})).data.genres.forEach(t=>{f[t.id]=t.name})}catch(e){console.error("Türler yüklenemedi:",e)}}function M(e){const s=(e||0)/2,r=Math.floor(s),n=s-r>=.5?1:0,y=5-r-n;let i="";for(let o=0;o<r;o++)i+='<li><svg width="14" height="14"><use href="./img/sprite.svg#full-star"></use></svg></li>';n&&(i+='<li><svg width="14" height="14"><use href="./img/sprite.svg#half-star"></use></svg></li>');for(let o=0;o<y;o++)i+='<li><svg width="14" height="14"><use href="./img/sprite.svg#empty-star"></use></svg></li>';return i}function q(e){var n;const t=e.release_date?e.release_date.slice(0,4):"N/A",s=((n=e.genre_ids)==null?void 0:n.map(y=>f[y]).filter(Boolean).join(", "))||"Unknown",r=e.poster_path?`${k}${e.poster_path}`:"./img/no-poster.jpg";return`
    <li class="catalog-movie-item" data-movie-id="${e.id}">
      <section class="card" style="cursor: pointer;">
        <img class="card-image" src="${r}" alt="${e.title}" loading="lazy" />
        <div class="card-content">
          <h2 class="card-title">${e.title}</h2>
          <p class="card-info">
            <span class="card-genre">${s}</span> |
            <span class="card-year">${t}</span>
          </p>
          <ul class="card-rating">${M(e.vote_average)}</ul>
        </div>
      </section>
    </li>
  `}function m(e){L.innerHTML="",e.forEach(t=>{t.poster_path&&L.insertAdjacentHTML("beforeend",q(t))})}l.forEach(e=>{e.addEventListener("click",()=>{p.childNodes[0].textContent=e.textContent,l.forEach(t=>t.classList.remove("selected")),e.classList.add("selected"),a.classList.remove("open"),g.style.display="none"})});async function v(e=1){try{await $();const t=await axios.get(`${u}/movie/popular`,{params:{api_key:d,language:"en-US",page:e}});m(t.data.results)}catch(t){console.error("API Hatası:",t)}}async function x(e,t=null){try{const s={api_key:d,language:"en-US",query:e};t&&(s.primary_release_year=t);const r=await axios.get(`${u}/search/movie`,{params:s});m(r.data.results)}catch(s){console.error("Arama hatası:",s)}}async function A(e){try{const t=await axios.get(`${u}/discover/movie`,{params:{api_key:d,language:"en-US",sort_by:"popularity.desc",primary_release_year:e}});m(t.data.results)}catch(t){console.error("Yıl filtre hatası:",t)}}_.addEventListener("click",()=>{const e=h.value.trim();e?x(e,c):c?A(c):v()});h.addEventListener("keydown",e=>{e.key==="Enter"&&(e.preventDefault(),_.click())});S.addEventListener("click",()=>{h.value="",c=null,p.childNodes[0].textContent="Year",l.forEach(t=>t.classList.remove("selected"));const e=Array.from(l).find(t=>t.dataset.value===void 0||t.textContent==="Year");e&&e.classList.add("selected"),v()});document.addEventListener("click",e=>{const t=e.target.closest(".catalog-movie-item");t&&t.dataset.movieId&&E(t.dataset.movieId)});v();
//# sourceMappingURL=catalog-D3B5mKwj.js.map
