{"version":3,"file":"home-CfwKKgun.js","sources":["../../src/js/hero.js","../../src/home.js"],"sourcesContent":["import { openMovieModal } from './modal.js';\nimport config from '../config.js';\nconst API_KEY = config.TMDB_API_KEY;\nconst BASE_URL = config.TMDB_BASE_URL;\n\nlet movie = null;\n\nasync function showRandomHeroMovie() {\n  try {\n    const res = await fetch(\n      `${BASE_URL}/trending/movie/week?api_key=${API_KEY}`\n    );\n    if (!res.ok) throw new Error(`API Hatası: ${res.status} ${res.statusText}`);\n    const data = await res.json();\n    const movies = data.results;\n    if (!movies || movies.length === 0) throw new Error('Film gelmedi');\n\n    const movie = movies[Math.floor(Math.random() * movies.length)];\n\n    const videoRes = await fetch(\n      `${BASE_URL}/movie/${movie.id}/videos?api_key=${API_KEY}`\n    );\n    const videoData = await videoRes.json();\n    const trailer = videoData.results?.find(\n      v =>\n        v.site === 'YouTube' &&\n        (v.type === 'Trailer' || v.type === 'Teaser' || v.type === 'Clip')\n    );\n\n    // DOM güncellemeleri (senin mevcut kodun aynı kalıyor)\n    document.getElementById('hero-default').style.display = 'none';\n    const heroRandom = document.getElementById('hero-random-movie');\n    heroRandom.style.display = 'flex';\n\n    if (movie.backdrop_path) {\n      heroRandom.style.backgroundImage = `url[](https://image.tmdb.org/t/p/original${movie.backdrop_path})`;\n    }\n\n    heroRandom.querySelector('.hero-movie-title').textContent = movie.title;\n    heroRandom.querySelector('.hero-movie-details').textContent =\n      movie.overview || 'Açıklama yok.';\n\n    const poster = document.getElementById('hero-movie-poster');\n    poster.src = movie.poster_path\n      ? `https://image.tmdb.org/t/p/w500${movie.poster_path}`\n      : 'https://via.placeholder.com/500x750?text=No+Image';\n\n    // Yıldızlar (aynı)\n    const starsContainer = heroRandom.querySelector('.hero-movie-stars');\n    starsContainer.innerHTML = '';\n    const rating = Math.round(movie.vote_average || 0);\n    const fullStars = Math.floor(rating / 2);\n    const halfStars = rating % 2 ? 1 : 0;\n    const emptyStars = 5 - fullStars - halfStars;\n\n    function getStarSVG(type) {\n      return `<svg class=\"star-icon\" width=\"14\" height=\"14\"><use href=\"#${type}-star\"></use></svg>`;\n    }\n    for (let i = 0; i < fullStars; i++)\n      starsContainer.innerHTML += getStarSVG('full');\n    for (let i = 0; i < halfStars; i++)\n      starsContainer.innerHTML += getStarSVG('half');\n    for (let i = 0; i < emptyStars; i++)\n      starsContainer.innerHTML += getStarSVG('empty');\n\n    // TRAILER\n    const modal = document.getElementById('trailer-modal');\n    const trailerBtn = document.getElementById('watch-trailer-btn');\n    const closeBtn = modal.querySelector('.trailer-close-btn');\n    const trailerContent = modal.querySelector('.trailer-content');\n\n    // Trailer varsa video, yoksa hata ekranı (zaten var)\n    const openTrailerModal = () => {\n      if (trailer) {\n        // Trailer varsa → YouTube videosu koy\n        trailerContent.innerHTML = `\n      <button class=\"trailer-close-btn\" type=\"button\">\n        <svg><use href=\"./img/sprite.svg#close-mobile\"></use></svg>\n      </button>\n      <iframe \n        src=\"https://www.youtube.com/embed/${trailer.key}?autoplay=1&rel=0&modestbranding=1\"\n        frameborder=\"0\"\n        allow=\"autoplay; encrypted-media; picture-in-picture\"\n        allowfullscreen\n        style=\"position:absolute; top:0; left:0; width:100%; height:100%;\">\n      </iframe>\n    `;\n      }\n      // Her durumda modal'ı aç\n      modal.style.display = 'block';\n    };\n\n    // Kapatma\n    const closeTrailerModal = () => {\n      modal.style.display = 'none';\n      trailerContent.innerHTML = `\n    <button class=\"trailer-close-btn\" type=\"button\">\n      <svg><use href=\"./img/sprite.svg#close-mobile\"></use></svg>\n    </button>\n    <p class=\"trailer-info\">\n      OOPS... <br />\n      We are very sorry! <br />\n      But we couldn’t find the trailer.\n    </p>\n    <img src=\"./img/Trailer-Error-Mobile.png\" \n         srcset=\"./img/Trailer-Error-Desktop@2x.png 2x\" \n         alt=\"Trailer not found\" class=\"trailer-image\">\n  `;\n    };\n\n    // Olaylar\n    trailerBtn.onclick = openTrailerModal;\n    closeBtn.onclick = closeTrailerModal;\n\n    // Dışarı tıklayınca kapan\n    modal.addEventListener('click', e => {\n      if (e.target === modal) closeTrailerModal();\n    });\n\n    // ESC tuşu\n    document.addEventListener('keydown', e => {\n      if (e.key === 'Escape' && modal.style.display === 'block') {\n        closeTrailerModal();\n      }\n    });\n\n    // Buton tıklama\n    if (trailerBtn && trailer) {\n      trailerBtn.style.cursor = 'pointer';\n      trailerBtn.disabled = false;\n      trailerBtn.onclick = openTrailerModal;\n    } else if (trailerBtn) {\n      trailerBtn.disabled = true;\n      trailerBtn.style.cursor = 'not-allowed';\n      trailerBtn.title = 'Bu film için fragman bulunamadı';\n    }\n\n    // Kapatma olayları\n    if (closeBtn) closeBtn.onclick = closeTrailerModal;\n    modal.addEventListener('click', e => {\n      if (e.target === modal) closeTrailerModal();\n    });\n\n    // ESC tuşu ile kapatma (ekstra güzel dokunuş)\n    document.addEventListener('keydown', e => {\n      if (e.key === 'Escape' && modal.style.display === 'flex') {\n        closeTrailerModal();\n      }\n    });\n\n    // More Details → modal açılsın ama TRAİLER GELMESİN\n    // More Details → modal açılsın ama TRAİLER KESİNLİKLE GELMESİN\n    document.getElementById('more-details-btn').onclick = () => {\n      if (!movie?.id) return;\n\n      // 1. Modal açılmadan önce trailer’ı zorla gizle\n      const trailerWrapper = document.getElementById('modal-trailer-wrapper');\n      const iframe = document.getElementById('modal-trailer-iframe');\n\n      if (trailerWrapper) trailerWrapper.style.display = 'none';\n      if (iframe) iframe.src = ''; // iframe’i tamamen sıfırla\n\n      // 2. Modal açıldıktan hemen sonra tekrar gizle (openMovieModal trailer’ı açıyor diye)\n      openMovieModal(movie.id);\n\n      // 3. Modal tamamen açıldıktan sonra trailer’ı tekrar kapat\n      setTimeout(() => {\n        if (trailerWrapper) trailerWrapper.style.display = 'none';\n        if (iframe) iframe.src = '';\n      }, 100); // 100ms sonra tekrar zorla kapat\n    };\n  } catch (err) {\n    console.error('Hero yüklenemedi:', err);\n    document.getElementById('hero-default').style.display = 'block';\n    document.getElementById('hero-random-movie').style.display = 'none';\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', showRandomHeroMovie);\n","// 1. Axios zaten CDN'den geldi, hazır\n// 2. API anahtarını Vite gibi kullanıyoruz (senin .env dosyan varsa)\nimport config from './config.js';\nimport './js/hero.js';\nimport { openMovieModal } from './js/modal.js';\n\n// en üste ekle (config import’tan sonra)\nlet genreMap = {}; // {28: \"Aksiyon\", 12: \"Macera\", ...}\n\nconst API_KEY = config.TMDB_API_KEY;\nconst BASE_URL = config.TMDB_BASE_URL;\nconst IMAGE_BASE = config.TMDB_IMAGE_BASE_URL;\n// Örnek: const API_KEY = 'c8b152c90517e0e6f9c365d9e0e48c7e';\n\nasync function loadGenres() {\n  if (Object.keys(genreMap).length > 0) return; // zaten yüklendiyse tekrar çekme\n\n  try {\n    const response = await axios.get(\n      `${BASE_URL}/genre/movie/list?api_key=${API_KEY}`\n    );\n    response.data.genres.forEach(g => {\n      genreMap[g.id] = g.name;\n    });\n    console.log('Genres loaded:', genreMap);\n  } catch (err) {\n    console.error(\"Genres couldn't loaded:\", err);\n  }\n}\n\n// TMDB'den haftanın trend filmlerini çeken basit fonksiyon\nasync function getWeeklyTrends() {\n  try {\n    const response = await axios.get(\n      `${BASE_URL}/trending/movie/week?api_key=${API_KEY}`\n    );\n    return response.data.results;\n  } catch (error) {\n    console.error('API hatası:', error);\n    return [];\n  }\n}\n\n// Bu fonksiyonda rating için gerekli olan içleri boş, yarı-dolu ve tam-dolu olan yıldız svg'lerimizi formüllere göre kullanıyoruz.\nfunction createStars(rating) {\n  const score = rating / 2; // 10 üzerinden → 5 yıldız\n  const full = Math.floor(score);\n  const half = score - full >= 0.5 ? 1 : 0;\n  const empty = 5 - full - half;\n\n  let html = '';\n  for (let i = 0; i < full; i++)\n    html += `<li>\n        <svg width=\"14\" height=\"14\">\n            <use href=\"./img/sprite.svg#full-star\"></use>\n        </svg>\n    </li>`;\n  if (half)\n    html +=\n      '<li><svg width=\"14\" height=\"14\"><use href=\"./img/sprite.svg#half-star\"></use></svg></li>';\n  for (let i = 0; i < empty; i++)\n    html +=\n      '<li><svg width=\"14\" height=\"14\"><use href=\"./img/sprite.svg#empty-star\"></use></svg></li>';\n  return html;\n}\n\nasync function initHomePage() {\n  console.log(\"Anasayfa yüklendi, API'den veri çekiliyor...\");\n\n  await loadGenres(); // önce türleri yükle\n\n  const movies = await getWeeklyTrends(); // haftanın popüler filmlerini yükle ve movies değişkenine ata\n  console.log('Movies list' + JSON.stringify(movies.map(movie => movie.title)));\n\n  await loadUpcomingMovie(); // upcoming this month filmlerini yükle\n\n  if (movies.length === 0) return;\n\n  // İlk 3 haftanın filmini çekmek için\n  const weeklyMovies = movies.slice(0, 3);\n\n  // Tüm kartları seç (3 tane home-movie-item var)\n  const cardContainers = document.querySelectorAll('.home-movie-item');\n\n  // Haftanın filmlerini içeren array'i gezerek, her bir indexteki elemanın özelliklerini container yapısında buluyoruz\n  weeklyMovies.forEach((movie, index) => {\n    const card = cardContainers[index];\n    if (!card) return;\n\n    // Başlık - Eğer .card-title class'ına sahip bir eleman var ise, bu elemanın içine, API'deki haftanın trendlerinde yer alan her filmin isim bilgisini atıyoruz.\n    const titleEl = card.querySelector('.card-title');\n    if (titleEl) titleEl.textContent = movie.title || movie.name;\n\n    // Yıl - Eğer .card-year class'ına sahip bir eleman var ise, bu elemanın içine, API'deki haftanın trendlerinde yer alan her filmin, \"-\"den sonraki ilk elemanı olan yıl bilgisini atıyoruz.\n    const year = movie.release_date ? movie.release_date.split('-')[0] : '—';\n    const yearEl = card.querySelector('.card-year');\n    if (yearEl) yearEl.textContent = year;\n\n    // Poster - Eğer .card-image class'ına sahip bir eleman var ise, bu elemanın içine, API'deki haftanın trendlerinde yer alan her filmin poster bilgisini atıyoruz.\n    const posterUrl = movie.poster_path\n      ? `${IMAGE_BASE}/w342${movie.poster_path}`\n      : './img/no-poster.jpg';\n    const imgEl = card.querySelector('.card-image');\n    if (imgEl) {\n      imgEl.src = posterUrl;\n      imgEl.alt = `${movie.title} poster`;\n    }\n\n    // Genre (en fazla 2 tür gösterelim) - API'deki haftanın trendlerinde yer alan her filmin, id'sine göre gezerek, içeriğindeki ilk iki değeri alıp, genreMap objesi içerisine ekleten ve bu genre bilgisini, eğer .card-genre class'ına sahip bir eleman var ise, bu elemanın içine atıyoruz.\n    const genres = movie.genre_ids\n      .slice(0, 2)\n      .map(id => genreMap[id] || 'Bilinmiyor')\n      .join(', ');\n    const genreEl = card.querySelector('.card-genre');\n    if (genreEl) genreEl.textContent = genres || 'No genres';\n\n    // Rating (yıldızlar) - Öncelikle createStars fonksiyonunda rating hesaplaması mantığını kuruyoruz ve eğer .card-rating class'ına sahip bir eleman var ise, bu elemanın içine, API'deki haftanın trendlerinde yer alan her filmin rating bilgisini atıyoruz.\n    const ratingEl = card.querySelector('.card-rating');\n    if (ratingEl) {\n      ratingEl.innerHTML = createStars(movie.vote_average);\n    }\n    card.style.cursor = 'pointer';\n    card.addEventListener('click', e => {\n      e.preventDefault();\n      e.stopPropagation();\n      console.log('Karta tıklandı, ID:', movie.id); // ← bu logu göreceksin\n      openMovieModal(movie.id);\n    });\n  });\n\n  console.log('3 kart başarıyla dolduruldu!');\n}\n\n// ===== UPCOMING THIS MONTH =====\nasync function loadUpcomingMovie() {\n  try {\n    const response = await axios.get(\n      `${config.TMDB_BASE_URL}/movie/upcoming?api_key=${config.TMDB_API_KEY}&page=1`\n    );\n\n    // Bugün ve sonrası olan filmleri alalım\n    const now = new Date().toISOString().split('T')[0];\n    const futureMovies = response.data.results.filter(\n      movie => movie.release_date >= now\n    );\n\n    if (futureMovies.length === 0) {\n      console.log('There are no upcoming movies this month!');\n      return;\n    }\n\n    // Rastgele bir tane seç\n    const movie = futureMovies[Math.floor(Math.random() * futureMovies.length)];\n\n    // Elementleri doldur\n    document.getElementById('upcoming-poster').src = movie.poster_path\n      ? `https://image.tmdb.org/t/p/w500${movie.poster_path}`\n      : './img/no-poster.jpg';\n\n    document.getElementById('upcoming-title').textContent = movie.title;\n    document.getElementById('upcoming-release').textContent = movie.release_date\n      ? formatDate(movie.release_date)\n      : '—';\n    document.getElementById('upcoming-vote').textContent =\n      movie.vote_average.toFixed(1);\n    document.getElementById('upcoming-votes').textContent = movie.vote_count;\n    document.getElementById('upcoming-popularity').textContent = Math.round(\n      movie.popularity\n    );\n\n    // Genre\n    const genres = movie.genre_ids\n      .slice(0, 2)\n      .map(id => genreMap[id] || 'Bilinmiyor')\n      .join(', ');\n    document.getElementById('upcoming-genre').textContent = genres;\n\n    console.log('Film Açıklaması' + movie.overview);\n    // Overview\n    document\n      .getElementById('upcoming-overview-content')\n      .querySelector('p').textContent =\n      movie.overview || \"Movie overview couldn't find!\";\n\n    console.log('Upcoming movie yüklendi:', movie.title);\n\n    // Butona film bilgisini ekleyelim (sonraki adımda kullanacağız)\n    const btn = document.getElementById('upcoming-library-btn');\n    btn.dataset.movieId = movie.id;\n  } catch (err) {\n    console.error('Upcoming movie yüklenemedi', err);\n  }\n}\n\n// Güzel tarih formatı: 03 Mart 2025\nfunction formatDate(dateString) {\n  const months = [\n    'January',\n    'February',\n    'March',\n    'April',\n    'May',\n    'June',\n    'July',\n    'August',\n    'September',\n    'October',\n    'November',\n    'December',\n  ];\n  const date = new Date(dateString);\n  return `${date.getDate()} ${months[date.getMonth()]} ${date.getFullYear()}`;\n}\n\n// ===== LOCALSTORAGE - KÜTÜPHANE =====\nconst LIBRARY_KEY = 'myMovieLibrary';\n\nfunction getLibrary() {\n  return JSON.parse(localStorage.getItem(LIBRARY_KEY)) || [];\n}\n\nfunction addToLibrary(movie) {\n  const library = getLibrary();\n  if (!library.find(m => m.id === movie.id)) {\n    library.push(movie);\n    localStorage.setItem(LIBRARY_KEY, JSON.stringify(library));\n    alert(`${movie.title} added to your library.`);\n  } else {\n    alert('This movie is already in your library!');\n  }\n}\n\n// Tüm \"Add to my library\" butonları\ndocument.addEventListener('click', async function (e) {\n  if (\n    e.target.id === 'upcoming-library-btn' ||\n    e.target.classList.contains('card-library-btn')\n  ) {\n    const movieId = e.target.dataset.movieId;\n\n    if (!movieId) return;\n\n    try {\n      const res = await axios.get(\n        `${config.TMDB_BASE_URL}/movie/${movieId}?api_key=${config.TMDB_API_KEY}`\n      );\n      addToLibrary(res.data);\n      e.target.textContent = 'Remove from my library';\n      e.target.disabled = true;\n    } catch (err) {\n      alert('An error occurred while adding the movie.');\n    }\n  }\n});\n\n// Sayfa tamamen yüklendiğinde çalışsın\ndocument.addEventListener('DOMContentLoaded', initHomePage);\n"],"names":["API_KEY","config","BASE_URL","showRandomHeroMovie","getStarSVG","type","res","movies","movie","trailer","_a","v","heroRandom","poster","starsContainer","rating","fullStars","halfStars","emptyStars","i","modal","trailerBtn","closeBtn","trailerContent","openTrailerModal","closeTrailerModal","e","trailerWrapper","iframe","openMovieModal","err","genreMap","IMAGE_BASE","loadGenres","g","getWeeklyTrends","error","createStars","score","full","half","empty","html","initHomePage","loadUpcomingMovie","weeklyMovies","cardContainers","index","card","titleEl","year","yearEl","posterUrl","imgEl","genres","id","genreEl","ratingEl","response","now","futureMovies","formatDate","btn","dateString","months","date","LIBRARY_KEY","getLibrary","addToLibrary","library","m","movieId"],"mappings":"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"}