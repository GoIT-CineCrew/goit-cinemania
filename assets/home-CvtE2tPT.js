import{c as l,o as E}from"./theme-BJoG-Zql.js";let g={};const y=l.TMDB_API_KEY,f=l.TMDB_BASE_URL,b=l.TMDB_IMAGE_BASE_URL;async function w(){if(!(Object.keys(g).length>0))try{(await axios.get(`${f}/genre/movie/list?api_key=${y}`)).data.genres.forEach(n=>{g[n.id]=n.name}),console.log("Genres loaded:",g)}catch(t){console.error("Genres couldn't loaded:",t)}}async function M(){try{return(await axios.get(`${f}/trending/movie/week?api_key=${y}`)).data.results}catch(t){return console.error("API hatası:",t),[]}}function I(t,n=!1){const r=t/2,e=Math.floor(r),s=r-e>=.5,o=5-e-(s?1:0);let a="";for(let i=0;i<e;i++)a+='<li><svg class="star-svg"><use href="./img/sprite.svg#full-star"></use></svg></li>';s&&(a+='<li><svg class="star-svg"><use href="./img/sprite.svg#half-star"></use></svg></li>');for(let i=0;i<o;i++)a+='<li><svg class="star-svg"><use href="./img/sprite.svg#empty-star"></use></svg></li>';return a}async function B(){console.log("Anasayfa yüklendi, API'den veri çekiliyor..."),await w();const t=await M();if(console.log("Movies list"+JSON.stringify(t.map(e=>e.title))),await A(),t.length===0)return;const n=t.slice(0,3),r=document.querySelectorAll(".home-movie-item");n.forEach((e,s)=>{const o=r[s];if(!o)return;const a=o.querySelector(".card-title");a&&(a.textContent=e.title||e.name);const i=e.release_date?e.release_date.split("-")[0]:"—",c=o.querySelector(".card-year");c&&(c.textContent=i);const h=e.poster_path?`${b}/w342${e.poster_path}`:"./img/no-poster.jpg",m=o.querySelector(".card-image");m&&(m.src=h,m.alt=`${e.title} poster`);const _=e.genre_ids.slice(0,2).map(d=>g[d]||"Bilinmiyor").join(", "),u=o.querySelector(".card-genre");u&&(u.textContent=_||"No genres");const p=o.querySelector(".card-rating");p&&(p.innerHTML=I(e.vote_average)),o.style.cursor="pointer",o.addEventListener("click",d=>{d.preventDefault(),d.stopPropagation(),console.log("Karta tıklandı, ID:",e.id),E(e.id)})}),console.log("3 kart başarıyla dolduruldu!")}async function A(){try{const t=await axios.get(`${l.TMDB_BASE_URL}/movie/upcoming?api_key=${l.TMDB_API_KEY}&page=1`),n=new Date().toISOString().split("T")[0],r=t.data.results.filter(c=>c.release_date>=n);if(r.length===0){console.log("There are no upcoming movies this month!");return}const e=r[Math.floor(Math.random()*r.length)],s=e.poster_path||"",o=document.getElementById("upcoming-poster");s?(o.srcset=`
    https://image.tmdb.org/t/p/w342${s} 342w,
    https://image.tmdb.org/t/p/w500${s} 500w,
    https://image.tmdb.org/t/p/w780${s} 780w,
    https://image.tmdb.org/t/p/original${s} 1280w
  `,o.sizes="(max-width: 767px) 90vw, (max-width: 1279px) 704px, 805px",o.src=`https://image.tmdb.org/t/p/w780${s}`,o.alt=`${e.title} poster`):(o.src="./img/no-poster.jpg",o.removeAttribute("srcset"),o.removeAttribute("sizes")),document.getElementById("upcoming-title").textContent=e.title,document.getElementById("upcoming-release").textContent=e.release_date?x(e.release_date):"—",document.getElementById("upcoming-vote").textContent=e.vote_average.toFixed(1),document.getElementById("upcoming-votes").textContent=e.vote_count,document.getElementById("upcoming-popularity").textContent=Math.round(e.popularity);const a=e.genre_ids.slice(0,2).map(c=>g[c]||"Bilinmiyor").join(", ");document.getElementById("upcoming-genre").textContent=a,console.log("Film Açıklaması"+e.overview),document.getElementById("upcoming-overview-content").querySelector("p").textContent=e.overview||"Movie overview couldn't find!",console.log("Upcoming movie yüklendi:",e.title);const i=document.getElementById("upcoming-library-btn");i.dataset.movieId=e.id}catch(t){console.error("Upcoming movie yüklenemedi",t)}}function x(t){const n=["January","February","March","April","May","June","July","August","September","October","November","December"],r=new Date(t);return`${r.getDate()} ${n[r.getMonth()]} ${r.getFullYear()}`}const v="myMovieLibrary";function S(){return JSON.parse(localStorage.getItem(v))||[]}function $(t){const n=S();n.find(r=>r.id===t.id)?alert("This movie is already in your library!"):(n.push(t),localStorage.setItem(v,JSON.stringify(n)),alert(`${t.title} added to your library.`))}document.addEventListener("click",async function(t){if(t.target.id==="upcoming-library-btn"||t.target.classList.contains("card-library-btn")){const n=t.target.dataset.movieId;if(!n)return;try{const r=await axios.get(`${l.TMDB_BASE_URL}/movie/${n}?api_key=${l.TMDB_API_KEY}`);$(r.data),t.target.textContent="Remove from my library",t.target.disabled=!0}catch{alert("An error occurred while adding the movie.")}}});document.addEventListener("DOMContentLoaded",B);
//# sourceMappingURL=home-CvtE2tPT.js.map
